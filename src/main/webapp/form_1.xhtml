<?xml version="1.0" encoding="UTF-8"?>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/XHtml.xhtml to edit this template
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">    <h:head>
        <title>TODO supply a title</title>
        <f:metadata>
            <f:viewAction action="#{usersManagedBean.redirectToLoginIfNotLoggedIn()}" />
        </f:metadata>
    </h:head>
    <h:body>
        <div class="card crud-demo">
            <h:form id="form">
                <p:growl id="messages" showDetail="true" />

                <p:commandButton value="New" icon="pi pi-plus" oncomplete="PF('manageBookDialog').show()"  actionListener="#{crudView.openNew()}"
                                 styleClass="ui-button-success" style="margin-right: .5rem">
                    <p:resetInput target=":dialogs:manage-product-content" />
                </p:commandButton>

                <p:commandButton id="delete-products-button" 
                                 icon="pi pi-trash" 
                                 styleClass="ui-button-danger"  
                                 actionListener="#{crudView.deleteBook}"
                                 update="@form">
                    <p:confirm header="Confirmation" message="Delete the selected products?"
                               icon="pi pi-exclamation-triangle" />
                </p:commandButton>

                <p:dialog header="Book Details" showEffect="fade" modal="true" widgetVar="manageBookDialog"
                          responsive="true">
                    <p:outputPanel id="manage-book-content" class="ui-fluid">
                        <div class="field">
                            <p:outputLabel for="title">Title</p:outputLabel>
                            <h:inputText id="title" value="#{booksManagedBean.title}" required="true" />
                        </div>
                        <div class="field">
                            <p:outputLabel for="author">Author</p:outputLabel>
                            <p:inputText id="author" value="#{booksManagedBean.author}" required="true" />
                        </div>
                        <div class="field">
                            <p:outputLabel for="pdfContent">PDF Content</p:outputLabel>
                            <p:fileUpload id="pdfContent" mode="advanced" dragDropSupport="true" fileLimit="1" 
                                          update="pdfUploaded" listener="#{booksManagedBean.handlePdfUpload}" />
                        </div>
                        <p:messages id="pdfUploaded" />
                        
                    </p:outputPanel>

                    <f:facet name="footer">
                        <p:commandButton value="Save" icon="pi pi-check" actionListener="#{booksManagedBean.addBook()}"
                                         update="manage-book-content" process="@form" />
                        <p:commandButton value="Cancel" icon="pi pi-times" onclick="PF('manageBookDialog').hide()"
                                         class="ui-button-secondary" type="button" />
                    </f:facet>
                </p:dialog>



        
            </h:form>

       
        </div>   
        <script src="res/js/script.js"></script>
    </h:body>
</html>
